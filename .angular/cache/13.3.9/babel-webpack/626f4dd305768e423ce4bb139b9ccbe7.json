{"ast":null,"code":"import { NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { CommonModule } from '@angular/common';\nimport { Component, EventEmitter, HostListener, Input, Output, forwardRef, ChangeDetectionStrategy, ChangeDetectorRef, NgModule } from '@angular/core';\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n/** @type {?} */\n\nimport * as ɵngcc0 from '@angular/core';\nimport * as ɵngcc1 from '@angular/common';\n\nfunction RatingComponent_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵtext(0);\n  }\n\n  if (rf & 2) {\n    const value_r3 = ctx.value;\n    const index_r4 = ctx.index;\n    ɵngcc0.ɵɵtextInterpolate(index_r4 < value_r3 ? \"\\u2605\" : \"\\u2606\");\n  }\n}\n\nfunction RatingComponent_ng_template_3_ng_template_3_Template(rf, ctx) {}\n\nconst _c0 = function (a0, a1) {\n  return {\n    index: a0,\n    value: a1\n  };\n};\n\nfunction RatingComponent_ng_template_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"span\", 3);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(2, \"span\", 4);\n    ɵngcc0.ɵɵlistener(\"mouseenter\", function RatingComponent_ng_template_3_Template_span_mouseenter_2_listener() {\n      const restoredCtx = ɵngcc0.ɵɵrestoreView(_r9);\n      const index_r6 = restoredCtx.index;\n      const ctx_r8 = ɵngcc0.ɵɵnextContext();\n      return ctx_r8.enter(index_r6 + 1);\n    })(\"click\", function RatingComponent_ng_template_3_Template_span_click_2_listener() {\n      const restoredCtx = ɵngcc0.ɵɵrestoreView(_r9);\n      const index_r6 = restoredCtx.index;\n      const ctx_r10 = ɵngcc0.ɵɵnextContext();\n      return ctx_r10.rate(index_r6 + 1);\n    });\n    ɵngcc0.ɵɵtemplate(3, RatingComponent_ng_template_3_ng_template_3_Template, 0, 0, \"ng-template\", 5);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const r_r5 = ctx.$implicit;\n    const index_r6 = ctx.index;\n    const ctx_r2 = ɵngcc0.ɵɵnextContext();\n\n    const _r0 = ɵngcc0.ɵɵreference(2);\n\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\"(\", index_r6 < ctx_r2.value ? \"*\" : \" \", \")\");\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵstyleProp(\"cursor\", ctx_r2.readonly ? \"default\" : \"pointer\");\n    ɵngcc0.ɵɵclassProp(\"active\", index_r6 < ctx_r2.value);\n    ɵngcc0.ɵɵproperty(\"title\", r_r5.title);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngTemplateOutlet\", ctx_r2.customTemplate || _r0)(\"ngTemplateOutletContext\", ɵngcc0.ɵɵpureFunction2(8, _c0, index_r6, ctx_r2.value));\n  }\n}\n\nconst RATING_CONTROL_VALUE_ACCESSOR = {\n  provide: NG_VALUE_ACCESSOR,\n\n  /* tslint:disable-next-line: no-use-before-declare */\n  useExisting: forwardRef(() => RatingComponent),\n  multi: true\n};\nlet RatingComponent = /*#__PURE__*/(() => {\n  class RatingComponent {\n    /**\n     * @param {?} changeDetection\n     */\n    constructor(changeDetection) {\n      this.changeDetection = changeDetection;\n      /**\n       * number of icons\n       */\n\n      this.max = 5;\n      /**\n       * fired when icon selected, $event:number equals to selected rating\n       */\n\n      this.onHover = new EventEmitter();\n      /**\n       * fired when icon selected, $event:number equals to previous rating value\n       */\n\n      this.onLeave = new EventEmitter(); // tslint:disable-next-line:no-any\n\n      this.onChange = Function.prototype; // tslint:disable-next-line:no-any\n\n      this.onTouched = Function.prototype;\n    }\n    /**\n     * @param {?} event\n     * @return {?}\n     */\n\n\n    onKeydown(event) {\n      /* tslint:disable-next-line: deprecation */\n      if ([37, 38, 39, 40].indexOf(event.which) === -1) {\n        return;\n      }\n\n      event.preventDefault();\n      event.stopPropagation();\n      /* tslint:disable-next-line: deprecation */\n\n      /** @type {?} */\n\n      const sign = event.which === 38 || event.which === 39 ? 1 : -1;\n      this.rate(this.value + sign);\n    }\n    /**\n     * @return {?}\n     */\n\n\n    ngOnInit() {\n      this.max = typeof this.max !== 'undefined' ? this.max : 5;\n      this.titles = typeof this.titles !== 'undefined' && this.titles.length > 0 ? this.titles : [];\n      this.range = this.buildTemplateObjects(this.max);\n    } // model -> view\n\n    /**\n     * @param {?} value\n     * @return {?}\n     */\n\n\n    writeValue(value) {\n      if (value % 1 !== value) {\n        this.value = Math.round(value);\n        this.preValue = value;\n        this.changeDetection.markForCheck();\n        return;\n      }\n\n      this.preValue = value;\n      this.value = value;\n      this.changeDetection.markForCheck();\n    }\n    /**\n     * @param {?} value\n     * @return {?}\n     */\n\n\n    enter(value) {\n      if (!this.readonly) {\n        this.value = value;\n        this.changeDetection.markForCheck();\n        this.onHover.emit(value);\n      }\n    }\n    /**\n     * @return {?}\n     */\n\n\n    reset() {\n      this.value = this.preValue;\n      this.changeDetection.markForCheck();\n      this.onLeave.emit(this.value);\n    }\n    /**\n     * @param {?} fn\n     * @return {?}\n     */\n\n\n    registerOnChange(fn) {\n      this.onChange = fn;\n    }\n    /**\n     * @param {?} fn\n     * @return {?}\n     */\n\n\n    registerOnTouched(fn) {\n      this.onTouched = fn;\n    }\n    /**\n     * @param {?} value\n     * @return {?}\n     */\n\n\n    rate(value) {\n      if (!this.readonly && value >= 0 && value <= this.range.length) {\n        this.writeValue(value);\n        this.onChange(value);\n      }\n    }\n    /**\n     * @protected\n     * @param {?} max\n     * @return {?}\n     */\n\n\n    buildTemplateObjects(max) {\n      /** @type {?} */\n      const result = [];\n\n      for (let i = 0; i < max; i++) {\n        result.push({\n          index: i,\n          title: this.titles[i] || i + 1\n        });\n      }\n\n      return result;\n    }\n\n  }\n\n  RatingComponent.ɵfac = function RatingComponent_Factory(t) {\n    return new (t || RatingComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef));\n  };\n\n  RatingComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: RatingComponent,\n    selectors: [[\"rating\"]],\n    hostBindings: function RatingComponent_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"keydown\", function RatingComponent_keydown_HostBindingHandler($event) {\n          return ctx.onKeydown($event);\n        });\n      }\n    },\n    inputs: {\n      max: \"max\",\n      titles: \"titles\",\n      readonly: \"readonly\",\n      customTemplate: \"customTemplate\"\n    },\n    outputs: {\n      onHover: \"onHover\",\n      onLeave: \"onLeave\"\n    },\n    features: [ɵngcc0.ɵɵProvidersFeature([RATING_CONTROL_VALUE_ACCESSOR])],\n    decls: 4,\n    vars: 3,\n    consts: [[\"tabindex\", \"0\", \"role\", \"slider\", \"aria-valuemin\", \"0\", 3, \"mouseleave\", \"keydown\"], [\"star\", \"\"], [\"ngFor\", \"\", 3, \"ngForOf\"], [1, \"sr-only\"], [1, \"bs-rating-star\", 3, \"title\", \"mouseenter\", \"click\"], [3, \"ngTemplateOutlet\", \"ngTemplateOutletContext\"]],\n    template: function RatingComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"span\", 0);\n        ɵngcc0.ɵɵlistener(\"mouseleave\", function RatingComponent_Template_span_mouseleave_0_listener() {\n          return ctx.reset();\n        })(\"keydown\", function RatingComponent_Template_span_keydown_0_listener($event) {\n          return ctx.onKeydown($event);\n        });\n        ɵngcc0.ɵɵtemplate(1, RatingComponent_ng_template_1_Template, 1, 1, \"ng-template\", null, 1, ɵngcc0.ɵɵtemplateRefExtractor);\n        ɵngcc0.ɵɵtemplate(3, RatingComponent_ng_template_3_Template, 4, 11, \"ng-template\", 2);\n        ɵngcc0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵattribute(\"aria-valuemax\", ctx.range.length)(\"aria-valuenow\", ctx.value);\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ctx.range);\n      }\n    },\n    directives: [ɵngcc1.NgForOf, ɵngcc1.NgTemplateOutlet],\n    encapsulation: 2,\n    changeDetection: 0\n  });\n  /** @nocollapse */\n\n  return RatingComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n\nlet RatingModule = /*#__PURE__*/(() => {\n  class RatingModule {\n    /**\n     * @return {?}\n     */\n    static forRoot() {\n      return {\n        ngModule: RatingModule,\n        providers: []\n      };\n    }\n\n  }\n\n  RatingModule.ɵfac = function RatingModule_Factory(t) {\n    return new (t || RatingModule)();\n  };\n\n  RatingModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: RatingModule\n  });\n  RatingModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[CommonModule]]\n  });\n  return RatingModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(RatingModule, {\n    declarations: function () {\n      return [RatingComponent];\n    },\n    imports: function () {\n      return [CommonModule];\n    },\n    exports: function () {\n      return [RatingComponent];\n    }\n  });\n})();\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n\nexport { RatingComponent, RatingModule, RATING_CONTROL_VALUE_ACCESSOR as ɵa }; //# sourceMappingURL=ngx-bootstrap-rating.js.map","map":null,"metadata":{},"sourceType":"module"}